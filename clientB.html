<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client B</title>
</head>
<body>
    <h1>Client B</h1>
    <video id="remoteVideo" autoplay></video>
    <script>
        // Créez une connexion WebSocket
        const socket = new WebSocket('wss://nameless-caverns-19262-2b731442c0a5.herokuapp.com');

        // Lorsque le WebSocket reçoit un message
        socket.onmessage = function(event) {
            const data = event.data;

            // Vérifiez si les données sont un Blob
            if (data instanceof Blob) {
                // Créez un URL de données pour le Blob
                const url = URL.createObjectURL(data);
                
                // Trouvez ou créez un élément vidéo pour afficher le flux
                const videoElement = document.getElementById('remoteVideo');
                videoElement.src = url;

                // Nettoyez l'URL de l'objet après utilisation
                videoElement.onload = () => {
                    URL.revokeObjectURL(url);
                };
            } else {
                // Si les données ne sont pas un Blob, essayez de les parser comme du JSON
                try {
                    const json = JSON.parse(data);
                    console.log('Données JSON reçues:', json);
                } catch (error) {
                    console.error('Erreur de parsing JSON:', error);
                }
            }
        };

        // Gérer les erreurs WebSocket
        socket.onerror = function(error) {
            console.error('Erreur WebSocket:', error);
        };

        // Optionnel: gérer la fermeture de la connexion WebSocket
        socket.onclose = function(event) {
            console.log('WebSocket fermé:', event.reason);
        };
    </script>
</body>
</html>
