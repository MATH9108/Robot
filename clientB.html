<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client B</title>
</head>
<body>
    <h1>Client B</h1>
    <video id="remoteVideo" autoplay controls style="width: 100%; max-width: 800px;"></video>
    <script>
        // Créez une connexion WebSocket
        const socket = new WebSocket('wss://nameless-caverns-19262-2b731442c0a5.herokuapp.com'); // Remplacez par l'URL de votre serveur

        socket.onopen = function() {
            console.log('Connexion WebSocket ouverte');
        };

        socket.onmessage = function(event) {
            console.log('Message reçu:', event.data);

            // Vérifiez si les données sont un Blob
            if (event.data instanceof Blob) {
                console.log('Blob reçu');
                const url = URL.createObjectURL(event.data);
                const videoElement = document.getElementById('remoteVideo');
                videoElement.src = url;

                // Nettoyez l'URL de l'objet après utilisation
                videoElement.onload = () => {
                    URL.revokeObjectURL(url);
                };
            } else {
                // Si les données ne sont pas un Blob, essayez de les parser comme du JSON
                try {
                    const json = JSON.parse(event.data);
                    console.log('Données JSON reçues:', json);
                } catch (error) {
                    console.error('Erreur de parsing JSON:', error);
                }
            }
        };

        socket.onerror = function(error) {
            console.error('Erreur WebSocket:', error);
        };

        socket.onclose = function(event) {
            console.log('WebSocket fermé:', event.reason);
        };
    </script>
</body>
</html>
